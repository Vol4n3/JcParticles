!function r(s,a,h){function c(e,t){if(!a[e]){if(!s[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(l)return l(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var n=a[e]={exports:{}};s[e][0].call(n.exports,function(t){return c(s[e][1][t]||t)},n,n.exports,r,s,a,h)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<h.length;t++)c(h[t]);return c}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("./PositionPoint"),n=t("../geometry2D/Point"),r=t("./RotationPoint"),s=(a.prototype.update=function(t){this.position.update(t),this.rotation.update(t)},a.prototype.offsetX=function(t){return t*this.scale.x+this.position.x},a.prototype.offsetY=function(t){return t*this.scale.y+this.position.y},a.prototype.reverseX=function(t){return(t+this.position.x)/this.scale.x},a.prototype.reverseY=function(t){return(t+this.position.y)/this.scale.y},a);function a(){this.position=new o.PositionPoint,this.scale=new n.Point(1,1),this.rotation=new r.RotationPoint}i.Camera=s},{"../geometry2D/Point":19,"./PositionPoint":8,"./RotationPoint":9}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Camera"),n=t("./Interaction"),r=(s.prototype.loop=function(){var e=this;this.updates.forEach(function(t){t.update(e)})},Object.defineProperty(s.prototype,"height",{get:function(){return this.container.clientHeight},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this.container.clientWidth},enumerable:!0,configurable:!0}),s.prototype.animate=function(){var e=this;this.useGL?this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT):this.ctx.clearRect(0,0,this.width,this.height),this.draws.forEach(function(t){e.useGL?t.drawGl(e):t.draw(e)}),requestAnimationFrame(this._animateRef)},s.prototype.resize=function(){this.canvas.width=this.width,this.canvas.height=this.height},s.prototype.destroy=function(){window.removeEventListener("resize",this._resizeRef),window.cancelAnimationFrame(this._animationFrame),window.clearInterval(this._interval),this.interaction.destroy()},s);function s(t,e){this.canvas=document.createElement("canvas"),this.camera=new o.Camera,this.draws=[],this.updates=[],this._resizeRef=this.resize.bind(this),this._animateRef=this.animate.bind(this),this._loopRef=this.loop.bind(this),this.container=document.getElementById(t),e?(this.gl=this.canvas.getContext("webgl2"),this.useGL=!0):(this.ctx=this.canvas.getContext("2d"),this.useGL=!1),this.gl?(this.gl.viewport(0,0,this.width,this.height),this.gl.clearColor(0,0,0,0)):(this.ctx=this.canvas.getContext("2d"),this.useGL=!1),this.canvas.style.display="block",this.container.appendChild(this.canvas),window.addEventListener("resize",this._resizeRef),this.resize(),this._animationFrame=requestAnimationFrame(this._animateRef),this._interval=setInterval(this._loopRef,1e3/45),this.interaction=new n.Interaction(this)}i.CanvasScene=r},{"./Camera":1,"./Interaction":4}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=(l.fromHSLA=function(t,e,i,o){e/=100,i/=100;var n=(1-Math.abs(2*i-1))*e,r=n*(1-Math.abs(t/60%2-1)),s=i-n/2,a=0,h=0,c=0;return 0<=t&&t<60?(a=n,h=r,c=0):60<=t&&t<120?(a=r,h=n,c=0):120<=t&&t<180?(a=0,h=n,c=r):180<=t&&t<240?(a=0,h=r,c=n):240<=t&&t<300?(a=r,h=0,c=n):300<=t&&t<360&&(a=n,h=0,c=r),new l(a=Math.round(a+s),h=Math.round(h+s),c=Math.round(c+s),o)},l.prototype.toVec4=function(){return[this.red,this.green,this.blue,this.alpha]},l);function l(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=1),this.red=t,this.green=e,this.blue=i,this.alpha=o}i.Color=o},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=(n.prototype.destroy=function(){this._scene.canvas.removeEventListener("click",this._refOnClick),this._scene.canvas.removeEventListener("mousemove",this._refOnHover)},n.prototype._OnClick=function(e){this.subscribesClick.forEach(function(t){t(e)})},n.prototype._OnHover=function(e){this.subscribesHover.forEach(function(t){t(e)})},n);function n(t){this._scene=t,this.subscribesClick=[],this.subscribesHover=[],this._refOnClick=this._OnClick.bind(this),this._refOnHover=this._OnHover.bind(this),this._scene.canvas.addEventListener("click",this._refOnClick),this._scene.canvas.addEventListener("mousemove",this._refOnHover)}i.Interaction=o},{}],5:[function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,s=t("../geometry2D/Segment"),a=(r=s.Segment,n(h,r),h.prototype.drawGl=function(t){},Object.defineProperty(h.prototype,"alpha",{get:function(){return Math.round(10*(1-this.length/this.maxlength))/10},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"startColor",{get:function(){return"hsla("+this.start.hue+", "+this.start.saturation+"%, "+this.start.light+"%, "+this.alpha+")"},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"endColor",{get:function(){return"hsla("+this.end.hue+", "+this.end.saturation+"%, "+this.end.light+"%, "+this.alpha+")"},enumerable:!0,configurable:!0}),h.prototype.draw=function(t){var e=t.ctx.createLinearGradient(this.start.x,this.start.y,this.end.x,this.end.y);e.addColorStop(0,this.startColor),e.addColorStop(1,this.endColor),t.ctx.strokeStyle=e,t.ctx.lineWidth=this.width,t.ctx.beginPath(),t.ctx.moveTo(this.start.x,this.start.y),t.ctx.lineTo(this.end.x,this.end.y),t.ctx.stroke(),t.ctx.closePath()},h);function h(){var t=null!==r&&r.apply(this,arguments)||this;return t.width=2,t.maxlength=50,t}i.Link=a},{"../geometry2D/Segment":20}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=(Object.defineProperty(n,"identity",{get:function(){return new Float32Array([1,0,0,0,1,0,0,0,1])},enumerable:!0,configurable:!0}),n.translation=function(t,e){return new Float32Array([1,0,0,0,1,0,t,e,1])},n.rotation=function(t){var e=Math.cos(t),i=Math.sin(t);return new Float32Array([e,-i,0,i,e,0,0,0,1])},n.scaling=function(t,e){return new Float32Array([t,0,0,0,e,0,0,0,1])},n.projection=function(t,e){return new Float32Array([2/t,0,0,0,-2/e,0,-1,1,1])},n.multiply=function(t,e){var i=t[0],o=t[1],n=t[2],r=t[3],s=t[4],a=t[5],h=t[6],c=t[7],l=t[8],u=e[0],p=e[1],d=e[2],y=e[3],f=e[4],_=e[5],g=e[6],v=e[7],m=e[8];return new Float32Array([u*i+p*r+d*h,u*o+p*s+d*c,u*n+p*a+d*l,y*i+f*r+_*h,y*o+f*s+_*c,y*n+f*a+_*l,g*i+v*r+m*h,g*o+v*s+m*c,g*n+v*a+m*l])},n.prototype.rotate=function(t){return this.data=n.multiply(this.data,n.rotation(t)),this},n.prototype.translate=function(t,e){return this.data=n.multiply(this.data,n.translation(t,e)),this},n.prototype.scale=function(t,e){return this.data=n.multiply(this.data,n.scaling(t,e)),this},n.prototype.project=function(t,e){return this.data=n.multiply(this.data,n.projection(t,e)),this},n);function n(t){void 0===t&&(t=n.identity),this.data=t}i.Matrix3=o},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),(i.MathUtils||(i.MathUtils={})).randomRange=function(t){return Math.random()*t*2-t}},{}],8:[function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,s=t("../geometry2D/Point"),a=(r=s.Point,n(h,r),h.prototype.update=function(t){this._isTargeting?this._traveling():(0<this.maxVelocity&&(this.velocity.x=this.velocity.x>this.maxVelocity?this.maxVelocity:this.velocity.x,this.velocity.x=this.velocity.x<-this.maxVelocity?-this.maxVelocity:this.velocity.x,this.velocity.y=this.velocity.y>this.maxVelocity?this.maxVelocity:this.velocity.y,this.velocity.y=this.velocity.y<-this.maxVelocity?-this.maxVelocity:this.velocity.y),this.velocity.multiply(this.friction),this.add(this.velocity))},h.prototype.startEasingTravel=function(t,e,i,o){this._targetPoint=t.copy(),this._easing=i,this._originPoint=this.copy(),this._time=e,this._isTargeting=!0,this._timeCount=0,this._callback=o},h.prototype._traveling=function(){this._timeCount<=this._time?(this.x=this._easing(this._timeCount,this._originPoint.x,this._targetPoint.x-this._originPoint.x,this._time),this.y=this._easing(this._timeCount,this._originPoint.y,this._targetPoint.y-this._originPoint.y,this._time),this._timeCount++):(this._isTargeting=!1,this._callback&&this._callback())},h);function h(){var t=null!==r&&r.apply(this,arguments)||this;return t.friction=new s.Point(1,1),t.velocity=new s.Point(0,0),t.maxVelocity=0,t._timeCount=0,t}i.PositionPoint=a},{"../geometry2D/Point":19}],9:[function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,s=t("../geometry2D/Point"),a=(r=s.Point,n(h,r),h.prototype.update=function(t){this.velocity*=this.friction,this.angle+=this.velocity},h);function h(){var t=null!==r&&r.apply(this,arguments)||this;return t.friction=1,t.velocity=0,t.angle=0,t}i.RotationPoint=a},{"../geometry2D/Point":19}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=t("../particles/WaveParticle"),o=(n.prototype.drawGl=function(t){},n.prototype.update=function(t){},n.prototype.draw=function(t){},n);function n(t){var e;this._scene=t,this.particles=[];for(var i=1;i<30;i++){var o=i/30*this._scene.width,n=this._scene.height/2,r=new s.WaveParticle(o,n,40,.35*i);this.particles.push(r),(e=this._scene.draws).push.apply(e,this.particles)}}i.ColoredWaveMap=o},{"../particles/WaveParticle":14}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Link"),o=t("../particles/Particle"),n=(r.prototype.update=function(t){},r.prototype.addParticle=function(){var t=new o.Particle(Math.random()*this._scene.width,Math.random()*this._scene.height);t.radius=Math.round(2*Math.random()+1),t.velocity.translate(4*Math.random()-2,4*Math.random()-2),t.moveTypes=["bounce"],t.randomColor(),this.particles.push(t),this._scene.draws.push(t),this._scene.updates.push(t)},r.prototype.draw=function(t){for(var e=0;e<this._particlesNumber;e++)for(var i=e+1;i<this._particlesNumber;i++){var o=this.particles[e],n=this.particles[i];if(!(o.distanceTo(n)>this.maxLinkLength)){var r=new s.Link(o,n);r.maxlength=this.maxLinkLength,r.draw(t)}}},r.prototype.drawGl=function(t){},r);function r(t,e){this._scene=t,this._particlesNumber=e,this.particles=[],this.maxLinkLength=70;for(var i=0;i<this._particlesNumber;i++)this.addParticle()}i.LinkedParticlesMap=n},{"../Link":5,"../particles/Particle":13}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../particles/Particle"),r=t("../textToParticle"),s=t("../../geometry2D/Point"),a=t("../../geometry2D/Circle"),h=t("../../geometry2D/Segment"),o=(c.prototype.draw=function(t){},c.prototype.drawGl=function(t){},c.prototype.update=function(t){},c);function c(i){var t=(new r.TextToParticle).getPoints("Hello world"),o=[];t.forEach(function(t){var e=new n.Particle(6*t.x,6*t.y);e.moveTypes=["vibration"],e.radius=Math.round(3*Math.random()+1),e.randomColor(),e.returnAtStarted=!0,e.friction=new s.Point(.12,.12),e.translate(Math.random()*i.width,Math.random()*i.height),o.push(e),i.draws.push(e),i.updates.push(e)}),i.interaction.subscribesHover.push(function(t){var i=new a.Circle(t.x,t.y);i.radius=30,o.forEach(function(t){if(t.inCircle(i,!0)){var e=new h.Segment(i,t).vector;e.length=3*i.radius,t.velocity.add(e.destination),t.returnAtStarted=!1}else t.returnAtStarted=!0})})}i.TextMap=o},{"../../geometry2D/Circle":18,"../../geometry2D/Point":19,"../../geometry2D/Segment":20,"../particles/Particle":13,"../textToParticle":15}],13:[function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,s=t("../PositionPoint"),a=t("../../geometry2D/Point"),h=t("../Math/Utils"),c=t("../../geometry2D/Vector"),l=t("../webgl/TriangleColoredShader"),u=t("../webgl/ColorMat4"),p=t("../Color"),d=(r=s.PositionPoint,n(y,r),Object.defineProperty(y.prototype,"color",{get:function(){return 1===this.alpha?"hsl("+this.hue+","+this.saturation+"%,"+this.light+"%)":"hsla("+this.hue+","+this.saturation+"%,"+this.light+"%,"+this.alpha+")"},enumerable:!0,configurable:!0}),y.prototype.bounce=function(t){(this.hasMoveType("bounce")||this.hasMoveType("bounceX"))&&(this.bounceBox("x",t.width-this.radius),this.bounceBox("x",this.radius,!0)),(this.hasMoveType("bounce")||this.hasMoveType("bounceY"))&&(this.bounceBox("y",t.height-this.radius),this.bounceBox("y",this.radius,!0))},y.prototype.bounceBox=function(t,e,i){(i?this[t]<e:this[t]>e)&&(this[t]=e,this.velocity[t]*=-1)},y.prototype.draw=function(t){t.ctx.fillStyle=this.color,t.ctx.beginPath(),t.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI),t.ctx.fill(),t.ctx.closePath()},y.prototype.drawGl=function(t){var e=new u.ColorMat4;e.setColor(p.Color.fromHSLA(this.hue,this.saturation,this.light,this.alpha),0),this.shader.drawGl(t.gl,{width:t.width,height:t.height,rotation:{angle:0,y:0,x:0},scale:{x:this.radius,y:this.radius},position:{x:this.x,y:this.y}},e)},y.prototype.hasMoveType=function(t){return-1<this.moveTypes.indexOf(t)},y.prototype.randomColor=function(){this.hue=Math.round(360*Math.random()),this.saturation=Math.round(100*Math.random()),this.light=Math.round(100*Math.random())},y.prototype.teleport=function(t){(this.hasMoveType("teleport")||this.hasMoveType("teleportX"))&&(this.teleportBox("x",t.width+this.distanceTeleport,-this.distanceTeleport),this.teleportBox("x",-this.distanceTeleport,t.width+this.distanceTeleport,!0)),(this.hasMoveType("teleport")||this.hasMoveType("teleportY"))&&(this.teleportBox("y",t.height+this.distanceTeleport,-this.distanceTeleport),this.teleportBox("y",-this.distanceTeleport,t.height+this.distanceTeleport,!0))},y.prototype.teleportBox=function(t,e,i,o){(o?this[t]<e:this[t]>e)&&(this[t]=i)},y.prototype.attractTo=function(t){this.velocity.add(new a.Point(t.x-this.x,t.y-this.y))},y.prototype.randomPropulsion=function(t){this.velocity.add(new a.Point(h.MathUtils.randomRange(t),h.MathUtils.randomRange(t)))},y.prototype.randomWalk=function(){if(this.hasMoveType("randomWalk")&&Math.random()>this.walkFrequency){var t=new c.Vector(this.velocity);t.angle+=h.MathUtils.randomRange(Math.PI/2),t.length+=h.MathUtils.randomRange(this.walkStrength),this.velocity=t.destination}},y.prototype.update=function(t){r.prototype.update.call(this,t),this.bounce(t),this.teleport(t),this.vibration(),this.randomWalk(),this.returnAtStarted&&this.attractTo(this._startedPosition)},y.prototype.vibration=function(){this.hasMoveType("vibration")&&(.5<Math.random()?this.randomPropulsion(this.vibrationStrength):this.attractTo(this._startedPosition))},y);function y(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=r.call(this,t,e)||this;i.alpha=1,i.distanceTeleport=50,i.hue=0,i.light=0,i.moveTypes=[],i.radius=1,i.walkStrength=3,i.walkFrequency=.95,i.saturation=0,i.vibrationStrength=5,i._startedPosition=i.copy();var o=(new a.Point).makePolygonVertices(12,1);return i.shader=new l.TriangleColoredShader(o),i}i.Particle=d},{"../../geometry2D/Point":19,"../../geometry2D/Vector":21,"../Color":3,"../Math/Utils":7,"../PositionPoint":8,"../webgl/ColorMat4":16,"../webgl/TriangleColoredShader":17}],14:[function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,s=t("./Particle"),a=(r=s.Particle,n(h,r),Object.defineProperty(h.prototype,"ellipseHeight",{get:function(){return this._centerY+this._maxHeight-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"ellipseRotation",{get:function(){return(1-this.ellipseHeight/this._maxHeight)*Math.PI/12},enumerable:!0,configurable:!0}),h.prototype.draw=function(t){t.ctx.fillStyle=this.color,t.ctx.beginPath(),t.ctx.ellipse(this.x,this._centerY,4,this.ellipseHeight,this.ellipseRotation,0,2*Math.PI),t.ctx.fill(),t.ctx.closePath()},h.prototype.update=function(t){r.prototype.update.call(this,t),this._increment>2*Math.PI&&(this._increment-=2*Math.PI),this.y=this._centerY+Math.cos(this._increment)*this._maxHeight,this._increment+=this.speed},h);function h(t,e,i,o){var n=r.call(this,t,e)||this;return n._maxHeight=i,n._increment=o,n.speed=.06,n._centerY=e,n.y=n._centerY+Math.cos(n._increment)*n._maxHeight,n.randomColor(),n}i.WaveParticle=a},{"./Particle":13}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=(n.prototype.getPoints=function(t,e){void 0===e&&(e="18px 'Arial', sans-serif"),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.font=e,this.ctx.fillStyle="#000000",this.ctx.fillText(t,0,18);for(var i=this.ctx.getImageData(0,0,this.width,this.height),o=[],n=0;n<i.width;n++)for(var r=0;r<i.height;r++)100<i.data[r*(4*i.width)+4*n-1]&&o.push({x:n,y:r});return o},n);function n(){this.width=400,this.height=18,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d")}i.TextToParticle=o},{}],16:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=(n.prototype.setColor=function(t,e){var i=t.toVec4();this.data[e]=i[0],this.data[1+e]=i[1],this.data[2+e]=i[2],this.data[3+e]=i[3]},n);function n(){this.data=new Float32Array([0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1])}i.ColorMat4=o},{}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../Math/Matrix3"),r=t("./ColorMat4"),o=(Object.defineProperty(s.prototype,"vertex",{get:function(){return"#version 300 es\n\t\t\nin vec2 a_position;\n\nin float a_color_index;\n\nuniform mat4 u_colors;\n\nuniform mat3 u_matrix;\n\nout vec4 v_color;\nvoid main() {\n\tgl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\n\tint index = int(a_color_index);\n\tv_color = u_colors[index];\n}\n"},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fragment",{get:function(){return"#version 300 es\n\t\t\nprecision mediump float;\n\nin vec4 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}\n"},enumerable:!0,configurable:!0}),s.prototype.getAttributeLocationBy=function(t){return this._gl.getAttribLocation(this._program,t)},s.prototype.getUniformLocationBy=function(t){return this._gl.getUniformLocation(this._program,t)},s.prototype.createShader=function(t,e){var i=this._gl.createShader(t);if(this._gl.shaderSource(i,e),this._gl.compileShader(i),this._gl.getShaderParameter(i,this._gl.COMPILE_STATUS))return i;console.warn("createShader fail",this._gl.getShaderInfoLog(i)),this._gl.deleteShader(i)},s.prototype.createProgram=function(t,e){var i=this._gl.createProgram();if(this._gl.attachShader(i,t),this._gl.attachShader(i,e),this._gl.linkProgram(i),this._gl.getProgramParameter(i,this._gl.LINK_STATUS))return i;console.warn("createProgram fail",this._gl.getProgramInfoLog(i)),this._gl.deleteProgram(i)},s.prototype.destroy=function(){this._gl.deleteProgram(this._program),this._gl.deleteShader(this._fragmentShader),this._gl.deleteShader(this._vertexShader),this._gl.deleteBuffer(this._positionBuffer),this._gl.deleteBuffer(this._colorBuffer)},s.prototype.drawGl=function(t,e,i){void 0===i&&(i=new r.ColorMat4),this._gl||this._init(t),this._gl.useProgram(this._program);var o=(new n.Matrix3).project(e.width,e.height).translate(e.position.x,e.position.y).rotate(e.rotation.angle).scale(e.scale.x,e.scale.y).translate(e.rotation.x,e.rotation.y);this._gl.uniformMatrix3fv(this.getUniformLocationBy("u_matrix"),!1,o.data),this._gl.uniformMatrix4fv(this.getUniformLocationBy("u_colors"),!1,i.data),this._gl.drawArrays(this._gl.TRIANGLE_FAN,0,this._vertices.length/2)},s.prototype._init=function(t){this._gl=t,this._vertexShader=this.createShader(this._gl.VERTEX_SHADER,this.vertex),this._fragmentShader=this.createShader(this._gl.FRAGMENT_SHADER,this.fragment),this._program=this.createProgram(this._vertexShader,this._fragmentShader),this._positionBuffer=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._positionBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(this._vertices),this._gl.STATIC_DRAW);var e=this.getAttributeLocationBy("a_position");this._gl.enableVertexAttribArray(e),this._gl.vertexAttribPointer(e,2,this._gl.FLOAT,!1,0,0),this._colorBuffer=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._colorBuffer);for(var i=[],o=0;o<this._vertices.length/2;o++){var n=this._attachedColor[o];i.push(n||0)}this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(i),this._gl.STATIC_DRAW);var r=this.getAttributeLocationBy("a_color_index");this._gl.enableVertexAttribArray(r),this._gl.vertexAttribPointer(r,1,this._gl.FLOAT,!1,0,0)},s);function s(t,e){void 0===e&&(e=[]),this._vertices=t,this._attachedColor=e}i.TriangleColoredShader=o},{"../Math/Matrix3":6,"./ColorMat4":16}],18:[function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,s=t("./Point"),a=(r=s.Point,n(h,r),h.prototype.inRectangle=function(t){var e=Math.abs(this.x-t.origin.x-t.width/2),i=Math.abs(this.y-t.origin.y-t.height/2);if(e>t.width/2+this.radius)return!1;if(i>t.height/2+this.radius)return!1;if(e<=t.width/2)return!0;if(i<=t.height/2)return!0;var o=e-t.width/2,n=i-t.height/2;return o*o+n*n<=this.radius*this.radius},h);function h(t,e,i){void 0===i&&(i=1);var o=r.call(this,t,e)||this;return o.radius=i,o}i.Circle=a},{"./Point":19}],19:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=(c.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},c.prototype.distanceTo=function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},c.prototype.inRectangle=function(t){return this.inRangeX(t.origin.x,t.origin.x+t.width)&&this.inRangeY(t.origin.y,t.origin.y+t.height)},c.prototype.copy=function(){return new c(this.x,this.y)},c.prototype.makePolygon=function(t,e,i){void 0===i&&(i=0);var o=[];t<3&&(t=3);for(var n=2*Math.PI/t,r=0;r<t;r++){var s=i+r*n,a=this.x+e*Math.cos(s),h=this.y-e*Math.sin(s);o.push(new c(a,h))}return o},c.prototype.makePolygonVertices=function(t,e,i){void 0===i&&(i=0);var o=[];t<3&&(t=3);for(var n=2*Math.PI/t,r=0;r<t;r++){var s=i+r*n,a=this.x+e*Math.cos(s),h=this.y-e*Math.sin(s);o.push(a,h)}return o},c.prototype.roundedCopy=function(t){return void 0===t&&(t=1),new c(Math.round(this.x*t)/t,Math.round(this.y*t)/t)},c.prototype.inTriangle=function(t,e,i,o){var n,r,s;return s=o?(n=this.signTo(t,e)<0,r=this.signTo(e,i)<0,this.signTo(i,t)<0):(n=this.signTo(t,e)<=0,r=this.signTo(e,i)<=0,this.signTo(i,t)<=0),n===r&&r===s},c.prototype.signTo=function(t,e){return(this.x-e.x)*(t.y-e.y)-(t.x-e.x)*(this.y-e.y)},c.prototype.rotateAround=function(t,e){var i=Math.cos(e),o=Math.sin(e);this.moveTo(new c(i*(this.x-t.x)+o*(this.y-t.y)+t.x,i*(this.y-t.y)-o*(this.x-t.x)+t.y))},c.prototype.translate=function(t,e){this.x=t,this.y=e},c.prototype.inCircle=function(t,e){return e?this.distanceTo(t)-t.radius<0:this.distanceTo(t)-t.radius<=0},c.prototype.moveTo=function(t){this.translate(t.x,t.y)},c.prototype.add=function(t){this.x+=t.x,this.y+=t.y},c.prototype.copyAdd=function(t){var e=this.copy();return e.add(t),e},c.prototype.multiply=function(t){this.x*=t.x,this.y*=t.y},c.prototype.inRangeX=function(t,e){return this.x>=Math.min(t,e)&&this.x<=Math.max(t,e)},c.prototype.inRangeY=function(t,e){return this.y>=Math.min(t,e)&&this.y<=Math.max(t,e)},c.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y},c.prototype.divide=function(t){this.x/=t.x,this.y/=t.y},c);function c(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}i.Point=o},{}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Point"),n=t("./Vector"),r=(Object.defineProperty(s.prototype,"length",{get:function(){return this.start.distanceTo(this.end)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"vector",{get:function(){return new n.Vector(new o.Point(this.end.x-this.start.x,this.end.y-this.start.y))},enumerable:!0,configurable:!0}),s.prototype.draw=function(t){t.ctx.beginPath(),t.ctx.moveTo(this.start.x,this.start.y),t.ctx.lineTo(this.end.x,this.end.y),t.ctx.stroke(),t.ctx.closePath()},s.prototype.drawGl=function(t){},s);function s(t,e){this.start=t,this.end=e}i.Segment=r},{"./Point":19,"./Vector":21}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Point"),n=t("./Segment"),r=(Object.defineProperty(s.prototype,"angle",{get:function(){return this._origin.angleTo(this.destination)},set:function(t){this.destination.rotateAround(this._origin,t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._origin.distanceTo(this.destination)},set:function(t){var e=this.angle;this.destination.translate(Math.cos(e)*t,Math.sin(e)*t)},enumerable:!0,configurable:!0}),s.prototype.copy=function(){return new s(this.destination)},s.prototype.makeSegmentFrom=function(t){return new n.Segment(t.copy(),t.copyAdd(this.destination))},s);function s(t){void 0===t&&(t=new o.Point),this.destination=t,this._origin=new o.Point}i.Vector=r},{"./Point":19,"./Segment":20}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("./class/engine2D/CanvasScene"),n=t("./class/engine2D/maps/LinkedParticlesMap"),r=t("./class/engine2D/maps/ColoredWaveMap"),s=t("./class/engine2D/maps/TextMap"),a=(h.prototype.destroy=function(){this.scene.destroy()},h.prototype.initExample=function(){var t;switch(this._options.demoType){case"example01":this.map=new n.LinkedParticlesMap(this.scene,120),this.scene.draws.push(this.map);break;case"example02":this.map=new r.ColoredWaveMap(this.scene),(t=this.scene.updates).push.apply(t,this.map.particles);break;case"example03":case"example04":this.map=new s.TextMap(this.scene)}},h);function h(t,e){switch(void 0===e&&(e={}),(this._options=e).demoType){case"example01":case"example02":case"example03":this.scene=new o.CanvasScene(t);break;case"example04":this.scene=new o.CanvasScene(t,!0)}e.demoType&&this.initExample()}window.JcParticle=a},{"./class/engine2D/CanvasScene":2,"./class/engine2D/maps/ColoredWaveMap":10,"./class/engine2D/maps/LinkedParticlesMap":11,"./class/engine2D/maps/TextMap":12}]},{},[22]);